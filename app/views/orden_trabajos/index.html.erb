<p id="notice"><%= notice %></p>
<div class="d-flex justify-content-between mr-5 ml-2">
<div class="ml-3 mb-2"><h3>Orden Trabajos</h3></div>
<div><h3> <%= link_to ' + Nuevo trabajo', new_orden_trabajo_path %></h3></div>
</div>

<script>
  $(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>

<input class="ml-3 w-25" id="myInput" type="text" placeholder="Buscar trabajo">
<table class="table table-striped  m-2">
  <thead>
    <tr>
      <th>Ot</th>
      <th>Cliente</th>
      <th>Producto</th>
      <th>Post</th>
      <th>Maquina</th>
      <th>Fecha entrega</th>
      <th>Observaciones</th>
      <th>Estado actual</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody id="myTable">
    <% @orden_trabajos.each do |orden_trabajo| %>
      <tr>
        <td><%= link_to orden_trabajo.id, orden_trabajo %></td>
        <td><%= link_to orden_trabajo.cliente, orden_trabajo %></td>
        <td><%= link_to orden_trabajo.producto, orden_trabajo %></td>

    <!-- Multiselect orden_trabajo.post -->
         <td>
            <script type="text/javascript">
              var paso;
              for (paso = 0; paso < 5; paso++) {
                $(document).ready(function() {$('#'+"<%=orden_trabajo.id%>").multiselect();});
              };
            </script>

            <select id= "<%=orden_trabajo.id%>" multiple="multiple">
              <%cadenatovector(orden_trabajo.post).each do |epost|%>
                <option value = <%= epost %> selected><%= epost %></option>
              <%end%>
            </select>
        </td>

    <!-- Multiselect orden_trabajo.maquina -->
        <td>
            <script type="text/javascript">
              var paso;
              for (paso = 0; paso < 5; paso++) {
                $(document).ready(function() {$('#'+"<%=orden_trabajo.id + 100%>").multiselect();});
              };
            </script>

            <select id= "<%=orden_trabajo.id + 100%>" multiple="multiple">
              <% OrdenTrabajo::MAQUINA.each do |vmaquina| %>
                <%if cadenatovector(orden_trabajo.maquina).include?  vmaquina %>
                    <option value = <%= vmaquina %> selected><%= vmaquina %></option>
                  <%else%>
                    <option value = <%= vmaquina %> ><%= vmaquina %></option>
                <%end%>
              <%end%>
            </select>
        </td>


        <td> <%= orden_trabajo.fecha_entrega.strftime("%d/%m/%y") %></td>
        <td><%= truncate(orden_trabajo.observaciones, :length => 50)%></td>
  <!-- Example single danger button -->
        <td>
            <script type="text/javascript">
                $('#example-multiple-selected');
            </script>
            <!-- Note the missing multiple attribute! -->
            <select id="example-multiple-selected">
                <option value="1">Espera</option>
                <option value="2">Diseño</option>
                <option value="3">CTP</option>
                <option value="4">Impresión</option>
                <option value="5">Post</option>
                <option value="6">Terminado</option>
            </select>
         </td>
        <td><%= link_to 'Edit', edit_orden_trabajo_path(orden_trabajo) %></td>
        <td><%= link_to 'Destroy', orden_trabajo, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>

    <% end %>

  </tbody>

</table>
